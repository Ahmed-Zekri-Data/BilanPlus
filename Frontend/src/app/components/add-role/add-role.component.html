<div class="container">
  <div class="header">
    <h2 class="mb-0">{{ isEditMode ? 'Modifier un Rôle' : 'Créer un Rôle' }}</h2>
  </div>
  <form [formGroup]="roleForm" (ngSubmit)="onSubmit()" class="role-form">
    <div class="form-group">
      <label for="nom">Nom du Rôle</label>
      <input id="nom" formControlName="nom" type="text" placeholder="Entrez le nom du rôle" />
      <div *ngIf="roleForm.get('nom')?.errors?.['required'] && roleForm.get('nom')?.touched" class="error-message">
        Le nom du rôle est requis.
      </div>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" placeholder="Entrez une description"></textarea>
    </div>
    <div class="form-group">
      <label>Permissions</label>
      <div class="permissions-list">
        <div *ngFor="let key of permissionKeys" class="permission-item">
          <input type="checkbox" [checked]="permissions[key]" (change)="togglePermission(key)" />
          <span>{{ key }}</span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="actif">Actif</label>
      <input id="actif" formControlName="actif" type="checkbox" />
    </div>
    <div class="form-actions">
      <button type="button" (click)="cancel()" class="cancel-btn"
              [@buttonClick]="buttonState"
              (mousedown)="buttonState = 'clicked'"
              (mouseup)="buttonState = 'normal'">
        Annuler
      </button>
      <button type="submit" [disabled]="loading || roleForm.invalid" class="submit-btn"
              [@buttonClick]="buttonState"
              (mousedown)="buttonState = 'clicked'"
              (mouseup)="buttonState = 'normal'">
        {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
      </button>
    </div>
    <div *ngIf="loading" class="spinner">
      <div class="spinner-inner"></div>
    </div>
    <div *ngIf="success" class="success-message">{{ success }}</div>
    <div *ngIf="error" class="error-message">✗ {{ error }}</div>
  </form>
</div>