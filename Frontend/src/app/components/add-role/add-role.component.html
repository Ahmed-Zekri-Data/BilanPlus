<br>
<h1>{{ isEditMode ? 'Modification de rôle' : 'Ajout de rôle' }}</h1>

<form [formGroup]="roleForm" (ngSubmit)="submitRole()" class="mt-4">

    <div class="form-group mb-3">
        <label for="nom">Nom</label>
        <input 
            type="text" 
            id="nom"
            class="form-control" 
            formControlName="nom" 
            placeholder="Entrer le nom du rôle"
            [class.is-invalid]="roleForm.controls['nom'].invalid && roleForm.controls['nom'].touched">
        <div class="alert alert-danger mt-2" 
             *ngIf="roleForm.controls['nom'].invalid && roleForm.controls['nom'].touched">
            <p *ngIf="roleForm.controls['nom'].hasError('required')">Le nom est obligatoire</p>
            <p *ngIf="roleForm.controls['nom'].hasError('minlength')">Le nom doit comporter au moins 3 caractères</p>
        </div>
    </div>

    <div class="form-group mb-3">
        <label for="permissions">Permissions (séparées par des virgules)</label>
        <input 
            type="text" 
            id="permissions"
            class="form-control" 
            formControlName="permissions" 
            placeholder="Ex: lire, écrire, supprimer"
            [class.is-invalid]="roleForm.controls['permissions'].invalid && roleForm.controls['permissions'].touched">
        <div class="alert alert-danger mt-2" 
             *ngIf="roleForm.controls['permissions'].invalid && roleForm.controls['permissions'].touched">
            <p *ngIf="roleForm.controls['permissions'].hasError('required')">Les permissions sont obligatoires</p>
        </div>
    </div>

    <div class="mt-4">
        <button 
            type="submit" 
            class="btn btn-primary me-2" 
            [disabled]="roleForm.invalid">
            {{ isEditMode ? 'Mettre à jour' : 'Enregistrer' }}
        </button>
        <a routerLink="/roles" class="btn btn-secondary">Annuler</a>
    </div>
</form>

<!-- Message de feedback -->
<div class="alert alert-info mt-3" *ngIf="message">
    {{ message }}
</div>