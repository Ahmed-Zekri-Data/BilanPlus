<mat-card class="search-card">
  <mat-form-field appearance="outline" class="search-field">
    <mat-label>Rechercher</mat-label>
    <input matInput placeholder="Rechercher un utilisateur..." (input)="search($event)">
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>
</mat-card>

<div class="header">
  <h2>VOS UTILISATEURS RÉCENTS</h2>
  <button mat-flat-button color="primary" (click)="addUtilisateur()">
    <mat-icon>upload</mat-icon> AJOUTER UN NOUVEL UTILISATEUR
  </button>
</div>

<mat-tab-group>
  <mat-tab label="TOUS">
    <div class="file-list">
      <mat-card *ngFor="let user of utilisateurs" class="file-card">
        <mat-card-content class="file-content">
          <mat-icon class="file-icon">person</mat-icon>
          <div class="file-info">
            <span class="file-name">{{ user.nom }} {{ user.prenom }}</span>
            <span class="file-details">{{ user.email }} | Rôle: {{ getRoleName(user) }}</span>
          </div>
          <div class="file-actions">
            <button mat-icon-button color="warn" (click)="openShareDialog(user)">
              <mat-icon>share</mat-icon> PARTAGER
            </button>
            <button mat-icon-button color="primary" (click)="editUtilisateur(user)">
              <mat-icon>edit</mat-icon> MODIFIER
            </button>
            <button mat-icon-button color="warn" (click)="deleteUtilisateur(user._id)">
              <mat-icon>delete</mat-icon> SUPPRIMER
            </button>
            <button mat-icon-button color="accent" (click)="showDetails(user)">
              <mat-icon>info</mat-icon> DÉTAILS
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </mat-tab>
</mat-tab-group>

<div *ngIf="errorMessage" class="error-message">
  {{ errorMessage }}
</div>

<button mat-flat-button color="accent" (click)="exportToCSV()">Exporter en CSV</button>